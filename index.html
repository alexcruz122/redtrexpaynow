<!DOCTYPE html>
<html>
<head>
  <title>Webxpay Test</title>
</head>
<body>

<h2>REDTREX & WebXpay Sandbox (TEST)</h2>

<button id="payBtn">Pay Now:100LKR</button>

<script>
document.getElementById("payBtn").onclick = async () => {
  const payload = {
    order_id: "ORDER123",
    amount: "100",
    currency: "LKR",
    first_name: "Dilanka",
    last_name: "Fernando",
    email: "test@example.com",
    contact_number: "0771234567",
    address_line_one: "Colombo"
  };

  // Send POST â†’ get HTML back
  const response = await fetch("https://webxpayipg.onrender.com/create-payment", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  });

  const html = await response.text();

  // Create a redirect page dynamically
  const redirectPage = window.open("", "_self"); 
  redirectPage.document.open();
  redirectPage.document.write(html);
  redirectPage.document.close();
};
</script>

</body>
</html>
